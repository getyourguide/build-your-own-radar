# This file was generated by gygdev. Do not manually modify it
pipeline:
  build-image-internal:
    image: hub.gyg.io/drone-plugins/gyg-registry
    privileged: true
    context: .
    dockerfile: ./Dockerfile.internal
    repo: hub.gyg.io/devops/tech-radar-internal
    tags:
      - ${DRONE_BUILD_NUMBER}.${DRONE_COMMIT_SHA:0:7}
    when:
      event: push
  register-dss-internal:
    image: hub.gyg.io/drone-plugins/dss
    privileged: true
    repo: hub.gyg.io/devops/tech-radar-internal
    tags:
      - ${DRONE_BUILD_NUMBER}.${DRONE_COMMIT_SHA:0:7}
    when:
      event: push

  build-image-external:
    image: hub.gyg.io/drone-plugins/gyg-registry
    privileged: true
    context: .
    dockerfile: ./Dockerfile.external
    repo: hub.gyg.io/devops/tech-radar-external
    tags:
      - ${DRONE_BUILD_NUMBER}.${DRONE_COMMIT_SHA:0:7}
    when:
      event: push
  register-dss-external:
    image: hub.gyg.io/drone-plugins/dss
    privileged: true
    repo: hub.gyg.io/devops/tech-radar-external
    tags:
      - ${DRONE_BUILD_NUMBER}.${DRONE_COMMIT_SHA:0:7}
    when:
      event: push
  register-dss:
    image: hub.gyg.io/drone-plugins/dss
    privileged: true
    # version needed by the release manager
    repo: hub.gyg.io/devops/tech-radar
    tags:
      - ${DRONE_BUILD_NUMBER}.${DRONE_COMMIT_SHA:0:7}
    when:
      event: push
